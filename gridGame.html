<script>
  /*So, let's say we have a room.
[]
Each room will have four walls, a floor, and a ceiling.
Each room will also display the rooms two rooms forward.
So, a map may look like...

   y1 y2 y3 y4 y5 y6
x1 [0,0][1,0][2,0][3,0][4,0][5,0]
x2 [0,1][1,1][2,1][3,1][4,1][5,1]
x3 [X][X][X][O][O][X]
x4 [O][O][X][O][O][X]

So, this would be an array.

var tile = function(x,y,val)
{
this.x = x;
this.y = y;
this.val = val;
}

so, a textfile like
OOXOOO
OOXXXX
XXX00X
00X00X
Would be read through line by line, character by character
var rowCount = 0;
int i = 0;
the character is then assigned to a tile value in an array.
[i, rowCount, val] with val being X or O, O denoting a space the player can move in.
when we get to a newline, i is set back to 0, and rowCount is incremented by one.
Do this until we get to the end.

The "player" is instantiated. The player has a x and y value similar to a tile object. This x and y value is given a starting position.
We can imagine that the starting position is [1,1]
The game waits for user input.
Inputs UP, the game checks to see that there is a tile object at [x,y-1].
Inputs DOWN, the game checks to see that there is a tile object at [x,y+1].
Inputs RIGHT, the game checks to see that there is a tile object at [x+1,y].
Inputs LEFT, the game checks to see that there is a tile object at [x-1,y].
Assuming there IS a tile value at that value, and that tile.value = O, the player's coordinates are then updated to that position.
 --------
 -----O--
 -OOOOOO-
 ---O-O--
 -OOOO---
 --------
The map grid should always be displayed.
for every value in the map array, print out [, value, ]. Then, newline.
*/
//var testMapData = "----O-,OOOOOO,--O-O-,OOOO--";
var testMapData = "--------,-----O--,-OOOOOO-,---O-O--,-OOOO---,--------";

var currMapArray = [];
function Tile(x,y,value)
{
  this.x = x,
  this.y = y,
  this.value = value
}
function Player(x,y)
{
  this.x = x;
  this.y = y;
}
var thePlayer = new Player(3,3);
var direction = "forward";
var dirDegree = 0;
function readGrid(mapData)
{
  var columnCount = 0;
  var rowCount = 0;
  for (var i = 0; i < mapData.length;i++)
  {
    //mapData.charAt(i)
    if (mapData.charAt(i) === ',')
    {
      rowCount = 0;
      columnCount = columnCount + 1;
    }
    else
    {
      console.log("pushing");
      currMapArray.push(new Tile(rowCount,columnCount,mapData.charAt(i)));
      rowCount++;
    }
  }
}
function updatePlayer()
{
  var tempX;
  var tempY;
  if (thePlayer.x === '0')
  {
    tempX = 25;
  }
  if (thePlayer.y === '0')
  {
    tempY = 25;
  }
  else
  {
    tempX = thePlayer.x * 25;
    tempY = thePlayer.y * 25;
  }
  document.getElementById("playerArrow").style.left = tempX + 400 + "px";
  document.getElementById("playerArrow").style.top = tempY + 400 + "px";
  //Going to need to do math here. X and Y will be something like, 1, 6, 2, etc. Or even 0. We need to make that in multiples of 25 or so.
}
function displayGrid(mapData)
{
    var columnCount = 0;
    var rowCount = 0;
    var spacingColumn = 400;
    var spacingRow = 400;
    var backgroundGrid = document.createElement("div");
    //Let's put the player character on the map.
    updatePlayer();
    for (var i = 0; i < mapData.length;i++)
    {
      //mapData.charAt(i)
      if (mapData.charAt(i) === ',')
      {
        rowCount = 0;
        columnCount = columnCount + 1;
        spacingColumn +=25;
        spacingRow = 400;
      }
      else
      {
        if (mapData.charAt(i) === 'O')
        {
          var x = document.createElement("div");
          x.setAttribute('class','gridSquare');
          x.style.position="absolute";
          x.style.left=spacingRow+"px";
          x.style.top=spacingColumn+"px";
          x.style.backgroundColor="orange";
          var thisDiv = document.getElementById('backgroundGrid');
          thisDiv.appendChild(x);
        }
        else if (mapData.charAt(i) === '-')
        {
          var x = document.createElement("div");
          x.setAttribute('class','gridSquare');
          x.style.position="absolute";
          x.style.left=spacingRow+"px";
          x.style.top=spacingColumn+"px";
          x.style.backgroundColor="blue";
          var thisDiv = document.getElementById('backgroundGrid');
          thisDiv.appendChild(x);
        }
        spacingRow+= 25;
        //console.log("pushing");
        //currMapArray.push(new Tile(rowCount,columnCount,mapData.charAt(i)));
        rowCount++;
      }
    }
}
var tempX = 0;
var tempY = 0;
function rotatePlayer(input)
{

  //dirDegree is 0. 0 is forward. 90 is right. 180 is back. 270 is left.
  switch (input)
  {
    case 'left':
    dirDegree = dirDegree - 90;
    break;
    case 'right':
    dirDegree = dirDegree + 90;
    break;
    case 'back':
    dirDegree = dirDegree + 180;
  }
  var x = document.getElementById('playerArrow');
  x.style.transform="rotate(" + dirDegree +"deg)";
  console.log(dirDegree);
  switch (dirDegree)
  {
    case 0:
    direction = "forward";

    //transform: rotate(180deg);

    break;
    case 90:
    direction = "right";
    break;
    case 180:
    direction = "backward";
    break;
    case 270:
    direction = "left";
    break;
    case 360:
    direction = "forward";
    dirDegree = 0;
    break;
    case -90:
    direction = "left";
    dirDegree = 270;
    break;
  }
  drawCamera();

}
function moveForward()
{
  console.log("Player is at " + thePlayer.x + "," + thePlayer.y);
//the game checks to see that there is a tile object at [x,y-1].

for (var i = 0; i <currMapArray.length;i++)
{

  switch (direction)
  {
    case 'forward':
    tempX = thePlayer.x;
    tempY = thePlayer.y - 1;
    break;
    case 'right':
    tempX = thePlayer.x + 1;
    tempY = thePlayer.y;
    break;
    case 'left':
    tempX = thePlayer.x - 1;
    tempY = thePlayer.y;
    break;
    case 'backward':
    tempX = thePlayer.x;
    tempY = thePlayer.y + 1;
    break;
  }
  //console.log(tempX, tempY);
  //console.log(thePlayer);

  if (currMapArray[i].value === 'O' && currMapArray[i].x === tempX && currMapArray[i].y === tempY)
  {
    //Character can move on that space.
    thePlayer.y = tempY;
    thePlayer.x = tempX;
    //console.log("The player has moved.");
    //console.log("Player is now at " + thePlayer.x + "," + thePlayer.y);
    updatePlayer();

    break;
  }
  else
  {
    //console.log("The way ahead is blocked.");
  }
}
drawCamera();

}
//We need a function for what direction the player is facing. The player has a default of facing Up.
function drawCamera()
{
  var x = thePlayer.x;
  var y = thePlayer.y;
  console.log(thePlayer);
  /*For now, tiles go...
  0 1 2 3 4 5
  6 7 8 9 10 11
  12 13 14 15 16 17
  18 19 20 21 22 23
  i-6 = North one.
  i-1 = West one.
  i+1 = East one.
  i+6 = South one.

  */
  var playerTile;
  for (var i = 0; i <currMapArray.length;i++)
  {
    if (currMapArray[i].x === x && currMapArray[i].y === y)
    {
      console.log ("have tile" + i);
      playerTile = i;
    }
  }

  //Let's start off by assuming that the player is facing forward (in our case UP).

  var aVal;
  var bVal;
  var cVal;
  var dVal;
  var eVal;
  var fVal;
  var gVal;
  var iVal;


  var zVal;


  //For facing forward, the values are -13, -12, -11, -7, -6, -5, -1, null, +1
  // Facing left, the values are 4,-2,-8,5,-1,-7,6,null,-6
  // Facing right, the values are -4,2,8,-5,1,7,-6,null,6
  // Facing backwards, the values are 13,12,11,7,6,5,1,null,-1
  switch (direction)
  {
    case 'forward':
    aVal = -17; bVal = -16; cVal = -15; dVal = -9; eVal = -8; fVal = -7; gVal = -1; iVal = 1; zVal = -24;
    break;
    case 'backward':
    aVal = 17; bVal = 16; cVal = 15; dVal = 9; eVal = 8; fVal = 7; gVal = 1; iVal = -1; zVal = 24;
    break;
    case 'left':
    aVal = 6; bVal = -2; cVal = -10; dVal = 7; eVal = -1; fVal = -9; gVal = 8; iVal = -8; zVal = -3;
    break;
    case 'right':
    aVal = -6; bVal = 2; cVal = 10; dVal = -7; eVal = 1; fVal = 9; gVal = -8; iVal = 8; zVal = 3;
    break;
  }



    /*For now, tiles go...
    0  1  2  3  4  5  6  7
    8  9  10 11 12 h 14 15
    16 17 18 19 20 21 22 23
    24 25 26 27 28 29 30 31
    facing left
    +6 (-2) -10
    +7 (-1) -9
    (+8) H (-8)



    i-8 = North one.
    i-1 = West one.
    i+1 = East one.
    i+8 = South one.

    Character can see on a grid like so.
    A B C
    D E F
    G H I

    H will always be the player.
    We can also think of this like...
    (h-17) (h-16) (h-15)
    (h-9) (h-8) (h-7)
    (h-1)   H   (h+1)
    Assuming of course that our grid width is 6.
    */
    var aFree;
    var bFree;
    var cFree;
    var dFree;
    var eFree;
    var fFree;
    var gFree;
    var iFree;
    var zFree;

    //Maybe we can have switches for the values.


    /*
    0  1  2  3  4  5
    6  7  8  9  10 11
    12 13 14 i 16 17
    18 19 20 21 22 23
    FOR FACING LEFT
    i-1 = North one.
    i+6 = West one.
    i-6 = East one.
    i+1 = South one.

    (+4) (-2) (-8)
    (+5) (-1) (-7)
    (+6) H    (-6)

    //FOR FACING RIGHT
    (-4) (+2) (+8)
    (-5) (+1) (+7)
    (-6) H    (+6)

    //FOR FACING BACK
    (h+13) (h+12) (h+11)
    (h+7) (h+6) (h+5)
    (h+1)   H   (h-1)



    */




    if (currMapArray[playerTile+aVal])
    {
      if (currMapArray[playerTile+aVal].value === 'O')
      {
        aFree = true;
      }
      else
      {
        aFree = false;
      }
    }

    else
    {
      aFree = false;
    }
    if (currMapArray[playerTile+bVal])
    {
      if (currMapArray[playerTile+bVal].value === 'O')
      {
        bFree = true;
      }
      else
      {
        bFree = false;
      }
    }

    else
    {
      bFree = false;
    }
    if (currMapArray[playerTile+cVal])
    {
      if (currMapArray[playerTile+cVal].value === 'O')
      {
        cFree = true;
      }
      else
      {
        cFree = false;
      }
    }
    else
    {
      cFree = false;
    }

    if (currMapArray[playerTile+dVal])
    {
      if (currMapArray[playerTile+dVal].value === 'O')
      {
        dFree = true;
      }
      else
      {
        dFree = false;
      }
    }
    else
    {
      dFree = false;
    }


    if (currMapArray[playerTile+eVal])
    {
      if (currMapArray[playerTile+eVal].value === 'O')
      {
        eFree = true;
      }
      else
      {
        eFree = false;
      }
    }
    else
    {
      eFree = false;
    }

    if (currMapArray[playerTile+fVal])
    {
      if (currMapArray[playerTile+fVal].value === 'O')
      {
        fFree = true;
      }
      else
      {
        fFree = false;
      }
    }
    else
    {
      fFree = false;
    }

    if (currMapArray[playerTile+gVal])
    {
      if (currMapArray[playerTile+gVal].value === 'O')
      {
        gFree = true;
      }
      else
      {
        gFree = false;
      }
    }
    else
    {
      gFree = false;
    }

    if (currMapArray[playerTile+iVal])
    {
      if (currMapArray[playerTile+iVal].value === 'O')
      {
        iFree = true;
      }
      else
      {
        iFree = false;
      }
    }
    else
    {
      iFree = false;
    }
    if (currMapArray[playerTile+zVal])
    {
      if (currMapArray[playerTile+zVal].value === 'O')
      {
        console.log("it tru");
        zFree = true;
      }
      else
      {
        zFree = false;
      }
    }
    else
    {
      zFree = false;
    }



  //  Character can see on a grid like so.
  //  A B C
  //  D E F
  //  G H I
  console.log(aFree, bFree, cFree,dFree,eFree,fFree,gFree,iFree);
  if (!bFree && !dFree && eFree && !fFree && gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndFork.png";
  }

  else if (!eFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0Null.png";
  }

  else if (!bFree && !cFree && !dFree && eFree && !fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEnd1.png";
  }

  else if (!aFree && bFree && !dFree && eFree && !fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEnd2.png";
  }
  else if (!aFree && !bFree && !dFree && eFree && !fFree && gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndFork.png";
  }

  else if (!aFree && bFree && !dFree && eFree && !fFree && gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndL.png";
  }
  else if (aFree && !bFree && !cFree && !dFree && eFree && !fFree && gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndForkL.png";
  }
  else if (!aFree && bFree && !cFree && !dFree && eFree && !fFree && !gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndR.png";
  }
  else if (!aFree && bFree && !dFree && eFree && fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndRFork.png";
  }
  else if (!aFree && !bFree && !dFree && !eFree && !fFree && gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0.png";
  }
  else if (!aFree && !bFree && !dFree && !eFree && !fFree && gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0Left.png";
  }
  else if (!aFree && !bFree && !dFree && !eFree && !fFree && !gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0Right.png";
  }
  else if (!aFree && !bFree && dFree && eFree && fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/forkAhead.png";
  }


  else if (aFree && bFree && cFree && !dFree && eFree && !fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/forkAhead2.png";
  }
  else if (aFree && bFree && cFree && !dFree && eFree && !fFree && gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/forkAheadI.png";
  }
  else if (!aFree && !bFree && dFree && eFree && !fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/leftAhead.png";
  }
  else if (aFree && bFree && !dFree && eFree && !fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/leftAhead2.png";
  }
  else if (aFree && bFree && !dFree && eFree && !fFree && gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/leftAheadFork2.png";
  }
  //LongLFork and longRFork need to be added
  else if (!aFree && !bFree && !dFree && eFree && fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/rightAhead.png";
  }
  else if (!aFree && bFree && cFree && !dFree && eFree && !fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/rightAhead2.png";
  }
  else if (!aFree && bFree && cFree && !dFree && eFree && !fFree && gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/rightAheadFork2.png";
  }
  else if (!aFree && bFree && !cFree && dFree && eFree && fFree && !gFree && !iFree && !zFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/longMidFork.png";
  }
  else if (aFree && bFree && cFree && !dFree && eFree && !fFree && !gFree && iFree && zFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/longerMidForkR.png";
  }
  else if (aFree && bFree && cFree && !dFree && eFree && !fFree && !gFree && !iFree && zFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/longerMidFork.png";
  }

  else if (!dFree && !eFree && !fFree && iFree && !gFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0Right.png";
  }
  else if (!dFree && !eFree && !fFree && !iFree && gFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0Left.png";
  }
  else if (bFree && eFree && fFree && !dFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndRFork.png";
  }
  else if (bFree && eFree && !fFree && dFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/deadEndLFork.png";
  }
  else if (!eFree && !iFree && gFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0Left.png";
  }
  else if (!eFree && iFree && gFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0.png";
  }
  else if (!eFree && !gFree && iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/fork0Right.png";
  }
  else if (bFree && zFree && eFree && dFree && fFree && !gFree && !iFree)
  {
    document.getElementById("displayScreen").src = "gridGameImg/longerMidFork.png";

  }
  else
  {
    document.getElementById("displayScreen").src = "gridGameImg/null.png";
  }
  /*
  false false false false false false false true
  This is what shows the img in question.
  */
}

</script>
<style>
  .square
  {
    height: 200px;
    width: 300px;
    background-color: grey;
    position: absolute;
    top: 300px;
    right: 350px;
  }


  .trapezoidLeft {
	border-bottom: 100px solid #555;
	border-left: 75px solid transparent;
	border-right: 75px solid transparent;
	height: 0;
	width: 200px;
    transform: rotate(90deg);
    position: absolute;
    top: 350px;
    right: 525px;
}
.trapezoidRight {
  border-bottom: 100px solid #555;
	border-left: 75px solid transparent;
	border-right: 75px solid transparent;
	height: 0;
	width: 200px;
    transform: rotate(-90deg);
    position: absolute;
    top: 350px;
    right: 125px;
}
.trapezoidBottom {
border-bottom: 75px solid #4d4d4d;
border-left: 100px solid transparent;
border-right: 100px solid transparent;
width: 300px;
  position: absolute;
  top: 500px;
  right: 250px;
  color: black;
}
.trapezoidCeiling {
border-bottom: 75px solid #4d4d4d;
border-left: 100px solid transparent;
border-right: 100px solid transparent;
width: 300px;
  position: absolute;
  transform: rotate(180deg);
  top: 225px;
  right: 250px;
  color: black;
}
.gridSquare
{
  border: 2px solid black;
  width: 20px;
  height: 20px;
  background-color: orange;
  z-index: 1;
}
#playerArrow {
  color: red;
  position: absolute;
	border-left: 10px solid transparent;
	border-right: 10px solid transparent;
	border-bottom: 15px solid red;
  z-index: 3;
}

</style>

<body>

  <button onclick = "readGrid(testMapData)">Read Grid </button>
  <button onclick= "displayGrid(testMapData)"> Display Grid </button>
  <div style="padding-top:1px;">
  <button onclick= "moveForward()">↑</button>
  <button onclick= "rotatePlayer('back')">↓</button>
  <button onclick= "rotatePlayer('left')">←</button>
  <button onclick= "rotatePlayer('right')">→</button>

  </div>
  <img id="displayScreen" src="gridGameImg/null.png" style="padding-top:5px;">
    </img>
  <div id="backgroundGrid" style="padding-top:100px;">
    <div id="playerArrow" />

    </div>
  <!--

    </div>
    -->
</body>
